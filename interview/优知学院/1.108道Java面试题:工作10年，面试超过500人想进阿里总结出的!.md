1. 数据库三范式及判断、E-R图
2. innodb和myisam存储引擎的区别

- innodb：
  - 支持事物
  - 支持外键
  - 聚集索引：聚簇索引文件存放在主键索引的叶子节点上，因此innodb必须要有主键，通过主键索引的效率很高，
  - 不保存具体行数，当执行select方法的时候，需要进行全表扫描
- myisam：
  - 不支持事物
  - 不支持外键
  - 非聚集索引
  - 保存具体行数，因此执行select的时候速度会很快

1. 索引分类（主键、唯一索引、全文索引、覆盖索引等等），最左前缀原则，哪些条件无法使用索引
2. B树、B+树区别，索引为何使用B+树

因为B+树是在B树的基础上，

1. 聚集索引与非聚集索引（使用非聚集索引的查询过程）

答：<img src="https://tva1.sinaimg.cn/large/008i3skNly1gyqixwpgqdj30xs0u0mzm.jpg" alt="image-20220126032350490" style="zoom:50%;" />

- 右图为非聚簇索引：表数据和索引部分是分成两部分存储，主键索引和二级索引存储上没有任何区别。使用的是B+ Tree作为索引存储结构，所有节点都是索引，叶子节点存储的是索引+索引对应的记录的数据。
- 左图为聚簇索引：表数据是和主键一起存储，主键索引的叶节点存储行数据，二级索引的叶节点存储行的主键值。使用的是B+Tree作为索引的存储结构，非叶子节点都是索引关键字，但是非叶子节点中的关键字中不存储对应的记录的具体内容或内容地址。叶子节点上的数据是主键与具体记录。

聚簇索引的优点：

1. 当你需要取出一定范围内的数据时，用聚簇索引也比用非聚簇索引好；
2. 当通过聚簇索引查找目标数据时理论上比非聚簇索引要快，因为非聚簇索引定位到对应主键时还要多一次目标记录寻址，即多一次I/O。
3. 使用覆盖索引扫描的查询可以直接使用页节点中的主键值。

聚簇索引的缺点：

1. 插入速度严重依赖 于插入顺序
2. 更新主键的代价很高，因为将会导致被更新的行移动；
3. 二级索引访问需要两次索引查找，第一次找到主键值，第二次根据主键值找到行数据；
4. 采用聚簇索引插入新值比采用非聚簇索引插入新值的速度要慢很多。
5. 事务的ACID（原子性、一致性、隔离性、持久性）
6. 事务隔离级别和各自存在的问题（脏读、不可重复读、幻读）和解决方式（间隙锁及MVCC）

隔离级别：

- 未提交读：如果一个事务读到了另一个未提交的事务修改过的数据，那么这种隔离级别就称之为“未提交读”。

<img src="https://tva1.sinaimg.cn/large/008i3skNly1gyqiybjcbuj30ua0cgdgv.jpg" alt="image-20220126032419979" style="zoom:50%;" />

- 已提交读：如果一个事务只能读到另一个已经提交的事务修改过的数据，并且其他事务每对该数据进行一次修改并提交后，该事务都能查询到最新值，那么这种隔离级别，就称之为“已提交读”。
- 可重复读：在一些业务场景中，一个事务只能读取到另一个已经提交的事务修改后的数据，但是第一次读过某条数据后，即使其他事务修改了该记录的值并且提交，该事务之后再读该条记录时，读取的仍是第一次读取的值，而不是每次读取的数据不同。
- 串行化：上边3重隔离级别都允许对同一条记录进行“读-读”，“读-写"，”写-读“的并发操作，如果我们不允许“读-写"，”写-读“的并发操作，可以使用串行化隔离界别。

1. 乐观锁和悲观锁、行锁与表锁、共享锁与排他锁（inndob如何手动加共享锁与排他锁）

- 乐观锁：总是假设最好的情况，每次去拿数据的时候都认为不会被别人修改，所以不会上锁，但是在更新的时候会判断一下再次期间数据有没有被人修改，可以使用版本号机制和CAS算法。乐观锁适用于读数据的应用类型，这样可以提高系统吞吐量。
- 悲观锁：总是假设最坏的情况，每次去拿数据都会认为被人修改了，所以每次拿数据的时候就会上锁，这样就会阻塞别人去拿这个数据。
- 行锁：
- 表锁：
- 共享锁：
- 排他锁：

1. MVCC（增加两个版本号）及delete、update、select时的具体控制
2. 死锁判定原理和具体场景
3. 查询缓慢和解决方式（explain、慢查询日志、show profile等）

- 如何分析具体的SQL语句：

- 数据库中慢查询的SQL设置：

  - 开启MySQL慢查询

    1. 修改配置文件，在my.ini增加几行：主要是慢查询的定义时间，以及慢查询log日志记录。

    <img src="https://tva1.sinaimg.cn/large/008i3skNly1gyqiz34pboj30lw0dwta6.jpg" alt="image-20220126032444942" style="zoom:50%;" />

    1. 通过MySQL数据库开启慢查询：

    <img src="https://tva1.sinaimg.cn/large/008i3skNly1gyqiz4bjv1j30mc04odg9.jpg" alt="image-20220126032503961" style="zoom:50%;" />

- 分析慢查询日志：

  - 使用explain关键字可以模拟优化器执行SQL查询来分析慢查询语句。

- 常见慢查询的优化：

  - 索引没有起到作用：

    1. 使用Like关键字进行查询的查询语句中，如果匹配字符串的第一个字符串为“%”，索引不会起作用，只有“%”不在第一位置索引才会起作用。
    2. 使用多列索引的查询语句，MySQL可以为多个字段创建索引，一个索引最多可以包括16个字段。对于多列索引，只有查询条件使用了这些字段中的第一个字段，索引才会被使用。

  - 优化数据库结构

    1. 将字段很多的表分解成多个表。
    2. 增加中间表。

  - 分解关联查询

    - 将一个大的查询分解成多个小查询是很有必要的。很多高性能的应用都会对关联查询进行分解，就是可以对每一个表进行一次单表查询，然后将查询结果在应用程序中进行关联，很多场景下这样会高效。

  - 优化LIMIT分页

    - 在系统中需要分页的操作通常会使用limit加上偏移量的方法实现，同时加上合适的order by子句，如果有对应的索引，通常效率会不错，否则MySQL需要做大量的文件排序操作。

    1. 在筛选字段加上索引；
    2. 先查询出主键ID值；
    3. 关联查询
    4. 建立复合索引

1. drop、truncate、delete区别

13.查询语句不同元素（where、jion、limit、group by、having等等）执行先后顺序

1. mysql优化，读写分离、主从复制

mysql的优化：

- 系统配置优化
- 表结构优化：使用符合数据库结构的三大范式于BCNF
- 索引优化：
  - join语句优化：当我们执行两个表的join的时候，就会有一个比较过程，逐条比较两个表的语句比较慢，因此可以把两个表中的数据依次读进一个内存块中，在mysql中执行：show variable like 'join_buffer_size'，可以看到join在内存中的缓存池大小，其大小将会应影响join语句的性能。在执行join的时候，数据库会选择一个表把他要返回以及需要进行比较的数据放进join_buffer。
  - 避免索引失效
- sql优化

1. 数据库崩溃时事务的恢复机制（REDO日志和UNDO日志）
2. Redis如何做高可用、集群

2.Redis和Memcached的优劣势比较

3.Redis的数据存储类型有哪些?

4.Redis的应用场景有哪些?

1. Redis的持久化方式，以及项目中用的哪种

6.Redis的缓存雪崩怎么解决？

7.Redis与数据库MySQL的双写一致如何解决？

8.Redis的缓存穿透怎么解决？

1. OSI七层协议、TCP/IP四层协议
2. 各层对应的网络设备（路由器、交换机、网关、网桥、集线器等等），各层对应的协议
3. 数据链路层的CSMA/CD协议，笔试可能会用到
4. IP地址分类，子网划分（笔试常用）
5. TCP和UDP的区别
6. TCP三次握手和四次挥手，为什么三次握手，为什么四次挥手
7. TCP精髓问题：停止等待协议、连续ARQ协议、滑动窗口、流量控制、拥塞控制（慢开始、拥塞避免、快重传、快恢复）
8. HTTP状态码
9. HTTP缓存机制（cache-control、Expires之类的一系列请求与相应报头字段）
10. session和cookie的区别，禁用cookie后怎么办
11. DNS解析的过程
12. 常用协议的端口

## **数据结构与算法**

1. 数组、链表（单向、双向、双端）、栈和队列、二叉树、红黑树、哈希表、堆（最大和最小）
2. 个人经验：栈和队列、哈希表、链表、二叉树的题较多，图的较少
3. 查找：二分查找及其变形
4. 二叉树：前序、中序、后序遍历，按规定方式打印，两个节点之间操作（最近公共祖先、距离）等问题。
5. 最大堆和最小堆：大数量级数据找最大几个等问题、堆如何调整等问题。
6. 栈和队列：经常作为算法题要用到的数据结构
7. 八大排序：3个简单的：冒泡、选择、插入及其优化，5个高级的：快速排序、归并排序、堆排序、希尔排序、桶排序（快排、归并、堆很重要）

8.手写堆排序

1. 给阿里2万多名员工按年龄排序应该选择哪个算法？
2. 常用命令：用户控制、权限控制、进程控制、系统状态查询之类的
3. /etc/hosts文件什么做用？

3 Linux目录结构（尤其是/proc非常重要）

1. linux文件系统结构和启动流程）
2. Java服务端问题排查（OOM，CPU高，Load高，类冲突）
3. 如何查看Java应用的线程信息

7.Thread dump文件如何分析（Runnable，锁，代码栈，操作系统线程ID关联）

1. 一个二进制文件运行出结果，操作系统做了什么（这是一个很全面的题）
2. 死锁的条件及银行家算法、资源分配图之类的
3. 进程间通信方式
4. linux的五种IO方式（阻塞与非阻塞、同步与异步的理解）
5. linux的select、poll、epoll的区别
6. 进程与线程区别、内核级线程与用户级线程
7. 页面置换算法，尤其是lru
8. 进程调度算法
9. linux中断响应机制
10. 虚拟内存机制
11. 谈谈对Synchronized关键字，类锁，方法锁，重入锁的理解
12. volatile的原理
13. java线程的状态及相互转换
14. 线程同步的几种方式和线程间通信
15. ArrayList和LinkedList内部的实现大致是怎样的？他们之间的区别和优缺点？
16. HashMap实现原理，如何保证HashMap的线程安全
17. ReentrantLock的内部实现?
18. JVM的垃圾回收机制，以及回收算法有哪些?
19. JVM什么时候会触发YGC，什么时候触发FGC？

10.JVM如何内存调优、内存泄漏如何排查

1. Spring框架中IOC的原理是什么？
2. 用Spring如何实现一个切面？
3. 死锁的四个必要条件？

14.常见的设计模式、手写一个单例、JDK、Spring原理里有哪些采用了设计模式。

15.多线程与高并发的关系和区别

16.常见的高并发场景有哪些，对应的架构设计方案是什么。

17.介绍完整的分布式中间件有哪些，各自的应用场景和作用。

18.双11秒杀活动，你的技术架构设计思路。